<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;obj&#x2F;machinery&#x2F;duct - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="obj/machinery/duct.html#var">Var Details</a> - <a href="obj/machinery/duct.html#proc">Proc Details</a></header>
<main>
<h1>fluid duct <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/duct.html">duct</a></aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L6">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 6"/></a></h1>

<table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/active">active</a></th><td>wheter to even bother with plumbing code or not</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/capacity">capacity</a></th><td>amount we can transfer per process. note that the ductnet can carry as much as the lowest capacity duct</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/color_to_color_support">color_to_color_support</a></th><td>TRUE to let colors connect when forced with a wrench, false to just not do that at all</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/connects">connects</a></th><td>bitfield with the directions we're connected in</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/drop_on_wrench">drop_on_wrench</a></th><td>wheter we just unanchored or drop whatever is in the variable. either is safe</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/duct">duct</a></th><td>our ductnet, wich tracks what we're connected to</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/duct_color">duct_color</a></th><td>the color of our duct</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/duct_layer">duct_layer</a></th><td>1,2,4,8,16</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/dumb">dumb</a></th><td>set to TRUE to disable smart duct behaviour</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/ignore_colors">ignore_colors</a></th><td>TRUE to ignore colors, so yeah we also connect with other colors without issue</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/lock_connects">lock_connects</a></th><td>wheter we allow our connects to be changed after initialization or not</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/lock_layers">lock_layers</a></th><td>whether we allow our layers to be altered</td></tr>
            <tr><th><a href="obj/machinery/duct.html#var/neighbours">neighbours</a></th><td>track ducts we're connected to. Mainly for ducts we connect to that we normally wouldn't, like different layers and colors, for when we regenerate the ducts</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/add_connects">add_connects</a></th><td>add a connect direction</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/add_neighbour">add_neighbour</a></th><td>add a duct as neighbour. this means we're connected and will connect again if we ever regenerate</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/attempt_connect">attempt_connect</a></th><td>start looking around us for stuff to connect to</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/can_anchor">can_anchor</a></th><td>collection of all the sanity checks to prevent us from stacking ducts that shouldnt be stacked</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/connect_duct">connect_duct</a></th><td>connect to a duct</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/connect_network">connect_network</a></th><td>see if whatever we found can be connected to</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/connect_plumber">connect_plumber</a></th><td>connect to a plumbing object</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/create_duct">create_duct</a></th><td>create a new duct datum</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/disconnect_duct">disconnect_duct</a></th><td>we disconnect ourself from our neighbours. we also destroy our ductnet and tell our neighbours to make a new one</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/generate_connects">generate_connects</a></th><td>Special proc to draw a new connect frame based on neighbours. not the norm so we can support multiple duct kinds</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/get_adjacent_ducts">get_adjacent_ducts</a></th><td>get a list of the ducts we can connect to if we are dumb</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/handle_layer">handle_layer</a></th><td>update the layer we are on</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/lose_neighbours">lose_neighbours</a></th><td>remove all our neighbours, and remove us from our neighbours aswell</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/reconnect">reconnect</a></th><td>''''''''''''''''optimized''''''''''''''''' proc for quickly reconnecting after a duct net was destroyed</td></tr>
            <tr><th><a href="obj/machinery/duct.html#proc/reset_connects">reset_connects</a></th><td>remove our connects</td></tr></table>
    <h2><a name="var">Var Details</a></h2><h3><aside class="declaration">var </aside><a name="var/active">active</a>
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L33">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 33"/></a></h3>
        <p>wheter to even bother with plumbing code or not</p><h3><aside class="declaration">var </aside><a name="var/capacity">capacity</a>
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L20">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 20"/></a></h3>
        <p>amount we can transfer per process. note that the ductnet can carry as much as the lowest capacity duct</p><h3><aside class="declaration">var </aside><a name="var/color_to_color_support">color_to_color_support</a>
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L31">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 31"/></a></h3>
        <p>TRUE to let colors connect when forced with a wrench, false to just not do that at all</p><h3><aside class="declaration">var </aside><a name="var/connects">connects</a>
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L12">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 12"/></a></h3>
        <p>bitfield with the directions we're connected in</p><h3><aside class="declaration">var </aside><a name="var/drop_on_wrench">drop_on_wrench</a>
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L37">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 37"/></a></h3>
        <p>wheter we just unanchored or drop whatever is in the variable. either is safe</p><h3><aside class="declaration">var </aside><a name="var/duct">duct</a>
            <aside>&ndash; /<a href="datum.html">datum</a>/<a href="datum/ductnet.html">ductnet</a></aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L18">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 18"/></a></h3>
        <p>our ductnet, wich tracks what we're connected to</p><h3><aside class="declaration">var </aside><a name="var/duct_color">duct_color</a>
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L23">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 23"/></a></h3>
        <p>the color of our duct</p><h3><aside class="declaration">var </aside><a name="var/duct_layer">duct_layer</a>
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L27">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 27"/></a></h3>
        <p>1,2,4,8,16</p><h3><aside class="declaration">var </aside><a name="var/dumb">dumb</a>
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L14">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 14"/></a></h3>
        <p>set to TRUE to disable smart duct behaviour</p><h3><aside class="declaration">var </aside><a name="var/ignore_colors">ignore_colors</a>
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L25">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 25"/></a></h3>
        <p>TRUE to ignore colors, so yeah we also connect with other colors without issue</p><h3><aside class="declaration">var </aside><a name="var/lock_connects">lock_connects</a>
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L16">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 16"/></a></h3>
        <p>wheter we allow our connects to be changed after initialization or not</p><h3><aside class="declaration">var </aside><a name="var/lock_layers">lock_layers</a>
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L29">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 29"/></a></h3>
        <p>whether we allow our layers to be altered</p><h3><aside class="declaration">var </aside><a name="var/neighbours">neighbours</a>
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L35">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 35"/></a></h3>
        <p>track ducts we're connected to. Mainly for ducts we connect to that we normally wouldn't, like different layers and colors, for when we regenerate the ducts</p><h2><a name="proc">Proc Details</a></h2><h3><aside class="declaration">proc </aside><a name="proc/add_connects">add_connects</a><aside>(new_connects) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L205">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 205"/></a></aside>
        </h3>
        <p>add a connect direction</p><h3><aside class="declaration">proc </aside><a name="proc/add_neighbour">add_neighbour</a><aside>(/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/duct.html">duct</a>/D, direction) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L194">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 194"/></a></aside>
        </h3>
        <p>add a duct as neighbour. this means we're connected and will connect again if we ever regenerate</p><h3><aside class="declaration">proc </aside><a name="proc/attempt_connect">attempt_connect</a><aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L64">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 64"/></a></aside>
        </h3>
        <p>start looking around us for stuff to connect to</p><h3><aside class="declaration">proc </aside><a name="proc/can_anchor">can_anchor</a><aside>(/<a href="turf.html">turf</a>/T) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L273">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 273"/></a></aside>
        </h3>
        <p>collection of all the sanity checks to prevent us from stacking ducts that shouldnt be stacked</p><h3><aside class="declaration">proc </aside><a name="proc/connect_duct">connect_duct</a><aside>(/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/duct.html">duct</a>/D, direction, ignore_color) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L89">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 89"/></a></aside>
        </h3>
        <p>connect to a duct</p><h3><aside class="declaration">proc </aside><a name="proc/connect_network">connect_network</a><aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/AM, direction, ignore_color) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L80">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 80"/></a></aside>
        </h3>
        <p>see if whatever we found can be connected to</p><h3><aside class="declaration">proc </aside><a name="proc/connect_plumber">connect_plumber</a><aside>(/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/plumbing.html">plumbing</a>/P, direction) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L128">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 128"/></a></aside>
        </h3>
        <p>connect to a plumbing object</p><h3><aside class="declaration">proc </aside><a name="proc/create_duct">create_duct</a><aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L190">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 190"/></a></aside>
        </h3>
        <p>create a new duct datum</p><h3><aside class="declaration">proc </aside><a name="proc/disconnect_duct">disconnect_duct</a><aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L144">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 144"/></a></aside>
        </h3>
        <p>we disconnect ourself from our neighbours. we also destroy our ductnet and tell our neighbours to make a new one</p><h3><aside class="declaration">proc </aside><a name="proc/generate_connects">generate_connects</a><aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L181">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 181"/></a></aside>
        </h3>
        <p>Special proc to draw a new connect frame based on neighbours. not the norm so we can support multiple duct kinds</p><h3><aside class="declaration">proc </aside><a name="proc/get_adjacent_ducts">get_adjacent_ducts</a><aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L213">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 213"/></a></aside>
        </h3>
        <p>get a list of the ducts we can connect to if we are dumb</p><h3><aside class="declaration">proc </aside><a name="proc/handle_layer">handle_layer</a><aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L236">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 236"/></a></aside>
        </h3>
        <p>update the layer we are on</p><h3><aside class="declaration">proc </aside><a name="proc/lose_neighbours">lose_neighbours</a><aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L200">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 200"/></a></aside>
        </h3>
        <p>remove all our neighbours, and remove us from our neighbours aswell</p><h3><aside class="declaration">proc </aside><a name="proc/reconnect">reconnect</a><aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L157">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 157"/></a></aside>
        </h3>
        <p>''''''''''''''''optimized''''''''''''''''' proc for quickly reconnecting after a duct net was destroyed</p><h3><aside class="declaration">proc </aside><a name="proc/reset_connects">reset_connects</a><aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08/code/modules/plumbing/ducts.dm#L209">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;plumbing&#x2F;ducts.dm 209"/></a></aside>
        </h3>
        <p>remove our connects</p></main>
<footer>
    tgstation.dme
    <a href="https://github.com/tgstation/tgstation/tree/63a6c6d38fac1f2d14eb4971fc4cb7f522e2cf08">63a6c6d</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/src/dmdoc/README.md">dmdoc 1.1.0</a></footer>
</body>
</html>
